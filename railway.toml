# =======================================
# ðŸš€ FluencyJet Frontend-Only Deployment
# Project: laudable-spirit
# Framework: Vite + React (Static Build)
# =======================================

[build]
builder = "NIXPACKS"

[phases.setup]
nixPkgs = ["nodejs_22", "npm_9_x", "openssl"]

[phases.install]
cmds = [
  "npm install --no-audit --no-fund"
]

[phases.build]
cmds = [
  "npm run build"
]

[start]
# âœ… 'serve' must listen on 0.0.0.0 (not localhost)
cmd = "npx serve -s dist -l tcp://0.0.0.0:8080"

# âœ… Tell Railway which port to expose
[[ports]]
internal_port = 8080
external_port = 8080
protocol = "http"

[variables]
NODE_ENV = "production"
PORT = "8080"
VITE_API_BASE_URL = "https://fluencyjet-sentence-master-production.up.railway.app"
